package mysql.query;

import calendar.TreatmentsStore;
import mysql.MySQLAccess;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class TreatmentsStoreQuery extends QuerySQL {
    public TreatmentsStoreQuery(MySQLAccess access) {super(access);}

    public TreatmentsStore[] getAll() throws Exception {
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = preparedStatement.executeQuery("SELECT (TreatmentName, TreatmentCost) "
                + "FROM TreatmentsStore;");

        int rows = getRowCount(resultSet);
        TreatmentsStore[] treatmentsStore = new TreatmentsStore[rows];

        while (resultSet.next()) {
            int currRow = resultSet.getRow() - 1;

            String treatmentName = resultSet.getString(1);
            int treatmentCost = resultSet.getInt(2);

            treatmentsStore[currRow] = new TreatmentsStore(
                    treatmentName, treatmentCost
                    );
        }

        close();
        return treatmentsStore;
    }

}
